<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lab 3</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/09f92706c9.js" crossorigin="anonymous"></script>
    <link href="lab3.css" rel="stylesheet" type="text/css">
</head>
<body>

<div id="topBar" class="navbar bg-light">
    <i class="fa-solid fa-3x fa-meteor"></i>
    <p class="fs-5">Welcome, Tina</p>
    <a class="btn btn-primary" href="../index.html">Logout</a>
</div>

<div style="display: flex; flex-direction: column; padding: 10px">
    <h2>Product List</h2>
    <table class="table">
        <thead class="table-dark">
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Price</th>
            <th scope="col">Stock</th>
            <th scope="col">Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>Node.js</td>
            <td>9.99$</td>
            <td>8</td>
            <td>
                <button class="btn btn-table btn-primary"><i class="fa-solid fa-cart-plus"></i></button>
            </td>
        </tr>
        <tr>
            <td>React</td>
            <td>19.99$</td>
            <td>5</td>
            <td>
                <button class="btn btn-table btn-primary"><i class="fa-solid fa-cart-plus"></i></button>
            </td>
        </tr>
        <tr>
            <td>Angular</td>
            <td>29.99$</td>
            <td>3</td>
            <td>
                <button class="btn btn-table btn-primary"><i class="fa-solid fa-cart-plus"></i></button>
            </td>
        </tr>
        </tbody>
    </table>
    <h2>Your Shopping Cart</h2>
    <table id="cartTable" class="table">
        <thead class="table-dark">
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Price</th>
            <th scope="col">Total</th>
            <th scope="col">Quantity</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>Node.js</td>
            <td>9.99$</td>
            <td>9.99$</td>
            <td>
                <div class="input-group mb-3">
                    <button class="btn btn-primary table-input-group">
                        <b>-</b>
                    </button>
                    <div class="custom-file table-input-group">
                        <label>
                            <input type="number" min="0" value="1" class="custom-file-input">
                        </label>
                    </div>
                    <button class="btn btn-primary table-input-group">
                        <b>+</b>
                    </button>
                </div>
            </td>
        </tr>
        <tr>
            <td>Node.js</td>
            <td>29.99$</td>
            <td>290.99$</td>
            <td>
                <div class="input-group mb-3">
                    <button class="btn btn-primary table-input-group">
                        <b>-</b>
                    </button>
                    <div class="table-input-group">
                        <label>
                            <input type="number" min="0" value="10" class="custom-file-input">
                        </label>
                    </div>
                    <button class="btn btn-primary table-input-group">
                        <b>+</b>
                    </button>
                </div>
            </td>
        </tr>
        <tr>
            <td colspan="4" style="text-align: right">
                Total: 300.98$
            </td>
        </tr>
        </tbody>
    </table>
    <button id="orderBtn" class="btn btn-primary">Place Order</button>
    <div id="checkingStuff">
        <hr />
        <a href="https://validator.w3.org/nu/?doc=https%3A%2F%2Fkonuralp.github.io%2Fwap0722%2FLab3%2Findex.html"><img src="https://mumstudents.org/cs472/2013-09/images/w3c-html.png" alt="html validator"/></a>
        <a href="https://jigsaw.w3.org/css-validator/validator?uri=https%3A%2F%2Fkonuralp.github.io%2Fwap0722%2FLab3%2Findex.html"><img src="https://jigsaw.w3.org/css-validator/images/vcss" alt="css validator"/></a>
    </div>
</div>

<script>
    let rows = document.getElementById("cartTable").getElementsByTagName("tr");
    document.getElementById("orderBtn").onclick = function () {
        alert("Order has been placed!");
    };
    let inputGroup = document.getElementsByClassName("input-group");
    for (let i = 0; i < inputGroup.length; i++) {
        let aGroup = inputGroup[i].children;
        let input = aGroup[1].children[0].children[0];
        aGroup[0].onclick = function () {
            let v = parseInt(input.value);
            if(isNaN(v)){
                v = 0;
            }
            input.value = Math.max(0, v - 1) + "";
            rows[i+1].children[2].innerHTML = (parseFloat(rows[i+1].children[1].innerHTML.slice(0,-1)) * parseInt(input.value)).toFixed(2) + "$";
        }
        aGroup[2].onclick = function () {
            let v = parseInt(input.value);
            if(isNaN(v)){
                v = 0;
            }
            input.value = Math.max(0, v + 1) + "";
            rows[i+1].children[2].innerHTML = (parseFloat(rows[i+1].children[1].innerHTML.slice(0,-1)) * parseInt(input.value)).toFixed(2) + "$";
        }
    }
    let addCartBtns = document.getElementsByClassName("btn-table");
    for (let i = 0; i < addCartBtns.length; i++) {
        addCartBtns[i].onclick = function () {
            alert("Item successfully added to cart!");
        }
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>
</body>
</html>